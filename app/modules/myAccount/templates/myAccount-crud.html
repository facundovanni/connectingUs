<div ng-form="CRUDMyAccountForm" class="crud" us-spinner spinner-on="ctrl.isLoading">
  <div class="container-fluid">
    <div ng-if="ctrl.alert.show" class="alert + {{ctrl.alert.type}}">
      <div>{{ctrl.alert.message}}</div>
    </div>
    <div class="row cda-row">
      <h1 class="col-xs-12 title">{{ctrl.title}}</h3>
    </div>
    <div class="row cda-row">
      <h2 class="col-xs-12 title">{{'myAccount.general.title' | translate}}</h2>
    </div>
    <div class="row cda-row">
      <div class="col-xs-6 form-group">
        <label class="label-crud label-required" translate="myAccount.general.firstName"></label>
        <input ng-model="ctrl.myAccount.firstname" type="text" class="form-control" ng-pattern="/.*[a-zA-Z]+.*/"
          required>
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.firstName">{{ctrl.validateError.message.text}}</div>
      </div>
      <div class="col-xs-6 form-group">
        <label class="label-crud label-required" translate="myAccount.general.lastName"></label>
        <input name="name" ng-model="ctrl.myAccount.lastname" type="text" class="form-control" ng-pattern="/.*[a-zA-Z]+.*/"
          required>
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.lastName">{{ctrl.validateError.message.text}}</div>
      </div>
    </div>
    <div class="row cda-row">
      <div class="col-xs-4">
        <label class="label-crud label-required" translate="myAccount.general.nickName"></label>
        <input ng-model="ctrl.myAccount.account.nickname" type="text" class="form-control" max-length="25" ng-disabled="ctrl.myAccount.id">
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.nickName">{{ctrl.validateError.message.text}}</div>
      </div>
      <div class="col-xs-4">
        <label class="label-crud label-required" translate="myAccount.general.dayOfBirth"></label>
        <div class="input-group">
          <input type="text" class="form-control" uib-datepicker-popup="dd/MM/yyyy" ng-model="ctrl.dateSelected.value"
            is-open="ctrl.dateSelected.opened" datepicker-options="ctrl.dateOptions" ng-required="true" close-text="Close"
            alt-input-formats="altInputFormats" />
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" ng-click="ctrl.openDate()">
              <i class="glyphicon glyphicon-calendar"></i>
            </button>
          </span>
        </div>
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.dateOfBirth">{{ctrl.dateSelected.error}}</div>
      </div>
      <div class="col-xs-4">
        <label class="label-crud label-required" translate="myAccount.general.gender"></label>
        <select class="btn btn-default col-xs-12" ng-model="ctrl.myAccount.gender" ng-options="x.description for x in ctrl.genders"></select>
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.gender">{{ctrl.validateError.message.text}}</div>
      </div>
    </div>
    <div class="row cda-row">
      <div class="col-xs-4">
        <label class="label-crud label-required" translate="myAccount.general.nationality"></label>
        <select class="btn btn-default col-xs-12" ng-model="ctrl.myAccount.countryofbirth" ng-options="x.Name for x in ctrl.nationalities"></select>
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.nationality">{{ctrl.validateError.message.text}}</div>
      </div>
      <div class="col-xs-4">
        <label class="label-crud label-required" translate="myAccount.general.country"></label>
        <select class="btn btn-default col-xs-12" ng-model="ctrl.myAccount.countryofresidence" ng-options="x.Name for x in ctrl.countries" ng-change="ctrl.onChangeCountries()"></select>
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.countryOfResidence">{{ctrl.validateError.message.text}}</div>
      </div>
      <div class="col-xs-4">
        <label class="label-crud label-required" translate="myAccount.general.city"></label>
        <select class="btn btn-default col-xs-12" ng-model="ctrl.myAccount.cityofresidence" ng-options="x.Name for x in ctrl.cities"></select>
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.city">{{ctrl.validateError.message.text}}</div>
      </div>
    </div>
    <div class="row cda-row">
      <h2 class="col-xs-12 title">{{'myAccount.account.title' | translate}}</h2>
    </div>
    <div class="row cda-row">
      <div ng-class="ctrl.myAccount.id ? 'col-xs-12' : 'col-xs-6'">
        <label class="label-crud label-required" translate="myAccount.account.email"></label>
        <input ng-model="ctrl.myAccount.account.mail" type="email" class="form-control" ng-disabled="ctrl.myAccount.id">
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.email">{{ctrl.validateError.message.email}}</div>
      </div>
      <div class="col-xs-6" ng-if="!ctrl.myAccount.id">
        <label class="label-crud label-required" translate="myAccount.account.emailConfirm"></label>
        <input ng-model="ctrl.emailConfirm" type="email" class="form-control">
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.emailConfirm">{{ctrl.validateError.message.emailConfirm}}</div>
      </div>
    </div>
    <div class="row cda-row">
      <div class="col-xs-6">
        <label class="label-crud label-required" translate="myAccount.account.password"></label>
        <input ng-model="ctrl.myAccount.account.password" type="password" class="form-control" minlength="8">
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.password">{{ctrl.validateError.message.password}}</div>
      </div>
      <div class="col-xs-6">
        <label class="label-crud label-required" translate="myAccount.account.passwordConfirm"></label>
        <input ng-model="ctrl.passwordConfirm" type="password" class="form-control" minlength="8">
        <div class="validate-error ng-cloak" ng-show="ctrl.validateError.show.passwordConfirm">{{ctrl.validateError.message.passwordConfirm}}</div>
      </div>
    </div>
    <div class="row cda-row">
      <div class="col-xs-4">
        <label class="label-crud" translate="myAccount.account.codeArea"></label>
        <input ng-model="ctrl.myAccount.areacode" type="text" class="form-control">
      </div>
      <div class="col-xs-4">
        <label class="label-crud" translate="myAccount.account.phoneNumber"></label>
        <input name="name" ng-model="ctrl.myAccount.phonenumber" type="text" class="form-control">
      </div>
      <div class="col-xs-4">
        <label class="label-crud" translate="myAccount.account.typeNumber"></label>
        <select class="btn btn-default col-xs-12" ng-model="ctrl.myAccount.phonetype" ng-options="x.description for x in ctrl.phoneTypes"></select>
      </div>
    </div>
    <div class="row cda-row">
      <div class="modal-footer">
        <div class="col-xs-12">
          <button class="btn btn-lg btn-success" type="button" ng-click="ctrl.save()" ng-disabled="ctrl.isLoading">
            {{'global.button.save'|translate}}</button>
          <button class="btn btn-lg btn-default" type="button" ng-click="ctrl.cancel()">
            {{'global.button.cancel'|translate}}</button>
        </div>
      </div>
    </div>
  </div>
</div>